<script defer src="/js/scripts.js"></script>
<!-- MAP API -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB2CGd_TVDT97bT076IBQWpm3h3gFtZGJM&&libraries=&v=weekly"></script>

<%- include('../partials/top.ejs', {user: user}) %>

<small id="geo-status"></small>

<h2>All Places</h2>

<!-- display MAP showing ALL PLACES and USER LOCATION -->
<div id="map"></div>

<div class="list-box">
  <ul>
    <% places.forEach((place) => { %>
    <li>
      <!-- use to pass data from server to front end -->
      <data class="geo-data" data-name="<%=place.name%>" data-lat="<%=place.loc.coordinates[0]%>" data-lng="<%=place.loc.coordinates[1]%>"></data>
      <!-- make place name a link to view place details / report cards  -->
      <a href="/places/<%=place._id%>"><%= place.name %></a>
      <!-- <ul>
        <li><%=place.loc.coordinates %></li>
      </ul> -->
    </li>
    <!-- ADD REPORT  BUTTON  -->
    <form action="/places/<%=place._id%>/reportcards/new" method="GET">
      <button><span class="material-icons"> thumbs_up_down </span></button>
    </form>

    <!-- DELETE PLACE BUTTON  -->

    <form action="/places/<%=place._id%>?_method=DELETE" method="POST">
      <button><span class="material-icons"> clear </span></button>
    </form>
    <% }) %>
  </ul>
</div>

<a href="places/new">Add A New Place</a>

<!-- DISPLAY ALL PLACES ON A MAP  -->

<%- include('../partials/bottom.ejs') %>
